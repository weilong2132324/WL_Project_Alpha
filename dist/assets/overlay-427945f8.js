import{z as le,y as fe,A as me,W as pe,am as ve,x,an as ye,ao as V,k as W,c as R,I as b,B as ge,m as Q,p as A,o as L,a as X,f as H,H as w,u as o,t as he,w as I,d as q,e as be,G as K,U as ne,q as Ce,r as S,C as we,J as Ee,K as ke,g as Te,ad as Me,a4 as Be,v as Ie,a2 as Se,ap as De}from"./index-ab9da3ee.js";import{u as J,b as Z,d as j,_ as ae,e as Pe,w as $e}from"./base-023a9467.js";import{P as _,c as Le}from"./vnode-d00f7f96.js";import{v as U,a as G,U as ee,X as Ae,T as Fe,V as Oe,i as Ne,b as ze,E as Re,a2 as We,r as Ye,W as He,a3 as Ue,_ as oe}from"./index-f008c14e.js";import{F as Ve,E as Xe}from"./focus-trap-3082f5b4.js";import{U as re}from"./input-780273cb.js";import{c as te,e as se}from"./button-a5e2a0da.js";import{t as _e}from"./error-78e43d3e.js";let Y;const xe=e=>{var s;if(!U)return 0;if(Y!==void 0)return Y;const t=document.createElement("div");t.className=`${e}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const l=t.offsetWidth;t.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",t.appendChild(n);const c=n.offsetWidth;return(s=t.parentNode)==null||s.removeChild(t),Y=l-c,Y};function Eo(e,s){if(!U)return;if(!s){e.scrollTop=0;return}const t=[];let l=s.offsetParent;for(;l!==null&&e!==l&&e.contains(l);)t.push(l),l=l.offsetParent;const n=s.offsetTop+t.reduce((d,m)=>d+m.offsetTop,0),c=n+s.offsetHeight,i=e.scrollTop,a=i+e.clientHeight;n<i?e.scrollTop=n:c>a&&(e.scrollTop=c-e.clientHeight)}const qe=(e,s,t)=>{let l={offsetX:0,offsetY:0};const n=a=>{const d=a.clientX,m=a.clientY,{offsetX:f,offsetY:v}=l,r=e.value.getBoundingClientRect(),p=r.left,E=r.top,F=r.width,O=r.height,N=document.documentElement.clientWidth,D=document.documentElement.clientHeight,z=-p+f,P=-E+v,k=N-p-F+f,T=D-E-O+v,$=C=>{const u=Math.min(Math.max(f+C.clientX-d,z),k),h=Math.min(Math.max(v+C.clientY-m,P),T);l={offsetX:u,offsetY:h},e.value.style.transform=`translate(${G(u)}, ${G(h)})`},y=()=>{document.removeEventListener("mousemove",$),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",$),document.addEventListener("mouseup",y)},c=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",n)},i=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",n)};le(()=>{fe(()=>{t.value?c():i()})}),me(()=>{i()})},Ke=(e,s={})=>{pe(e)||_e("[useLockscreen]","You need to pass a ref param to this function");const t=s.ns||J("popup"),l=ve(()=>t.bm("parent","hidden"));if(!U||ee(document.body,l.value))return;let n=0,c=!1,i="0";const a=()=>{setTimeout(()=>{Oe(document==null?void 0:document.body,l.value),c&&document&&(document.body.style.width=i)},200)};x(e,d=>{if(!d){a();return}c=!ee(document.body,l.value),c&&(i=document.body.style.width),n=xe(t.namespace.value);const m=document.documentElement.clientHeight<document.body.scrollHeight,f=Ae(document.body,"overflowY");n>0&&(m||f==="scroll")&&c&&(document.body.style.width=`calc(100% - ${n}px)`),Fe(document.body,l.value)}),ye(()=>a())},ie=e=>{if(!e)return{onClick:V,onMousedown:V,onMouseup:V};let s=!1,t=!1;return{onClick:i=>{s&&t&&e(i),s=t=!1},onMousedown:i=>{s=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},je=Z({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:j([String,Array,Object])},zIndex:{type:j([String,Number])}}),Ge={click:e=>e instanceof MouseEvent},Je="overlay";var Ze=W({name:"ElOverlay",props:je,emits:Ge,setup(e,{slots:s,emit:t}){const l=J(Je),n=d=>{t("click",d)},{onClick:c,onMousedown:i,onMouseup:a}=ie(e.customMaskEvent?void 0:n);return()=>e.mask?R("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:i,onMouseup:a},[b(s,"default")],_.STYLE|_.CLASS|_.PROPS,["onClick","onMouseup","onMousedown"]):ge("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[b(s,"default")])}});const Qe=Ze,ue=Symbol("dialogInjectionKey"),ce=Z({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Ne},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),eo={close:()=>!0},oo=["aria-label"],to=["id"],so=W({name:"ElDialogContent"}),lo=W({...so,props:ce,emits:eo,setup(e){const s=e,{t}=ze(),{Close:l}=We,{dialogRef:n,headerRef:c,bodyId:i,ns:a,style:d}=Q(ue),{focusTrapRef:m}=Q(Ve),f=Le(m,n),v=A(()=>s.draggable);return qe(n,c,v),(r,p)=>(L(),X("div",{ref:o(f),class:w([o(a).b(),o(a).is("fullscreen",r.fullscreen),o(a).is("draggable",o(v)),o(a).is("align-center",r.alignCenter),{[o(a).m("center")]:r.center},r.customClass]),style:ne(o(d)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:c,class:w(o(a).e("header"))},[b(r.$slots,"header",{},()=>[H("span",{role:"heading",class:w(o(a).e("title"))},he(r.title),3)]),r.showClose?(L(),X("button",{key:0,"aria-label":o(t)("el.dialog.close"),class:w(o(a).e("headerbtn")),type:"button",onClick:p[0]||(p[0]=E=>r.$emit("close"))},[R(o(Re),{class:w(o(a).e("close"))},{default:I(()=>[(L(),q(be(r.closeIcon||o(l))))]),_:1},8,["class"])],10,oo)):K("v-if",!0)],2),H("div",{id:o(i),class:w(o(a).e("body"))},[b(r.$slots,"default")],10,to),r.$slots.footer?(L(),X("footer",{key:0,class:w(o(a).e("footer"))},[b(r.$slots,"footer")],2)):K("v-if",!0)],6))}});var no=ae(lo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ao=Z({...ce,appendToBody:{type:Boolean,default:!1},beforeClose:{type:j(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ro={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[re]:e=>Ye(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},io=(e,s)=>{const l=Ce().emit,{nextZIndex:n}=He();let c="";const i=te(),a=te(),d=S(!1),m=S(!1),f=S(!1),v=S(e.zIndex||n());let r,p;const E=Ue("namespace",Pe),F=A(()=>{const g={},B=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(g[`${B}-margin-top`]=e.top),e.width&&(g[`${B}-width`]=G(e.width))),g}),O=A(()=>e.alignCenter?{display:"flex"}:{});function N(){l("opened")}function D(){l("closed"),l(re,!1),e.destroyOnClose&&(f.value=!1)}function z(){l("close")}function P(){p==null||p(),r==null||r(),e.openDelay&&e.openDelay>0?{stop:r}=oe(()=>y(),e.openDelay):y()}function k(){r==null||r(),p==null||p(),e.closeDelay&&e.closeDelay>0?{stop:p}=oe(()=>C(),e.closeDelay):C()}function T(){function g(B){B||(m.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(g):k()}function $(){e.closeOnClickModal&&T()}function y(){U&&(d.value=!0)}function C(){d.value=!1}function u(){l("openAutoFocus")}function h(){l("closeAutoFocus")}function M(g){var B;((B=g.detail)==null?void 0:B.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&Ke(d);function de(){e.closeOnPressEscape&&T()}return x(()=>e.modelValue,g=>{g?(m.value=!1,P(),f.value=!0,v.value=e.zIndex?v.value++:n(),we(()=>{l("open"),s.value&&(s.value.scrollTop=0)})):d.value&&k()}),x(()=>e.fullscreen,g=>{s.value&&(g?(c=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=c)}),le(()=>{e.modelValue&&(d.value=!0,f.value=!0,P())}),{afterEnter:N,afterLeave:D,beforeLeave:z,handleClose:T,onModalClick:$,close:k,doClose:C,onOpenAutoFocus:u,onCloseAutoFocus:h,onCloseRequested:de,onFocusoutPrevented:M,titleId:i,bodyId:a,closed:m,style:F,overlayDialogStyle:O,rendered:f,visible:d,zIndex:v}},uo=["aria-label","aria-labelledby","aria-describedby"],co=W({name:"ElDialog",inheritAttrs:!1}),fo=W({...co,props:ao,emits:ro,setup(e,{expose:s}){const t=e,l=Ee();se({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},A(()=>!!l.title)),se({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},A(()=>!!t.customClass));const n=J("dialog"),c=S(),i=S(),a=S(),{visible:d,titleId:m,bodyId:f,style:v,overlayDialogStyle:r,rendered:p,zIndex:E,afterEnter:F,afterLeave:O,beforeLeave:N,handleClose:D,onModalClick:z,onOpenAutoFocus:P,onCloseAutoFocus:k,onCloseRequested:T,onFocusoutPrevented:$}=io(t,c);ke(ue,{dialogRef:c,headerRef:i,bodyId:f,ns:n,rendered:p,style:v});const y=ie(z),C=A(()=>t.draggable&&!t.fullscreen);return s({visible:d,dialogContentRef:a}),(u,h)=>(L(),q(De,{to:"body",disabled:!u.appendToBody},[R(Se,{name:"dialog-fade",onAfterEnter:o(F),onAfterLeave:o(O),onBeforeLeave:o(N),persisted:""},{default:I(()=>[Te(R(o(Qe),{"custom-mask-event":"",mask:u.modal,"overlay-class":u.modalClass,"z-index":o(E)},{default:I(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":u.title||void 0,"aria-labelledby":u.title?void 0:o(m),"aria-describedby":o(f),class:w(`${o(n).namespace.value}-overlay-dialog`),style:ne(o(r)),onClick:h[0]||(h[0]=(...M)=>o(y).onClick&&o(y).onClick(...M)),onMousedown:h[1]||(h[1]=(...M)=>o(y).onMousedown&&o(y).onMousedown(...M)),onMouseup:h[2]||(h[2]=(...M)=>o(y).onMouseup&&o(y).onMouseup(...M))},[R(o(Xe),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o(P),onFocusAfterReleased:o(k),onFocusoutPrevented:o($),onReleaseRequested:o(T)},{default:I(()=>[o(p)?(L(),q(no,Me({key:0,ref_key:"dialogContentRef",ref:a},u.$attrs,{"custom-class":u.customClass,center:u.center,"align-center":u.alignCenter,"close-icon":u.closeIcon,draggable:o(C),fullscreen:u.fullscreen,"show-close":u.showClose,title:u.title,onClose:o(D)}),Be({header:I(()=>[u.$slots.title?b(u.$slots,"title",{key:1}):b(u.$slots,"header",{key:0,close:o(D),titleId:o(m),titleClass:o(n).e("title")})]),default:I(()=>[b(u.$slots,"default")]),_:2},[u.$slots.footer?{name:"footer",fn:I(()=>[b(u.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):K("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,uo)]),_:3},8,["mask","overlay-class","z-index"]),[[Ie,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var mo=ae(fo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const ko=$e(mo);export{ko as E,Eo as s};
