import"./base-023a9467.js";import{E as b}from"./overlay-427945f8.js";import{E as h}from"./button-a5e2a0da.js";import{E as k,a as y}from"./form-item-30714343.js";import{E as g}from"./input-780273cb.js";import{D as M,r as m,z as B,o as D,a as N,c as o,w as a,f as r,g as P,a3 as U,h as p}from"./index-ab9da3ee.js";import{M as S}from"./MarkDownEditor-d520dc82.js";import{r as d,E as c}from"./index-82377cc5.js";import{u as $}from"./post-92774c51.js";import"./vnode-d00f7f96.js";import"./index-f008c14e.js";import"./focus-trap-3082f5b4.js";import"./isNil-c75b1b34.js";import"./error-78e43d3e.js";import"./MarkDown-d61ecb1e.js";import"./_commonjsHelpers-de833af9.js";import"./CodeEditor-652116f5.js";import"./axios-4a70c6fc.js";const q={class:"flex flex-col w-full h-full"},F={class:"dialog-footer"},I={class:"flex flex-col w-full h-full p-4"},T={class:"flex w-full h-10 space-x-6 border justify-between items-center px-2"},se={__name:"Editor",setup(j){const f=M().params.id,s=m(!1),e=m({}),u=m();B(()=>{if(f){const n=$();e.value=n.data}});const v=()=>{d.post("/api/v1/posts",{name:e.value.name,content:u.value.content}).then(n=>{c.success("Create success"),s.value=!1})},_=()=>{e.value.content=u.value.content,d.put(`/api/v1/posts/${e.value.id}`,e.value).then(n=>{c.success("Update success"),s.value=!1})},x=()=>{e.value.id?_():v()};return(n,t)=>{const w=g,E=k,V=y,i=h,C=b;return D(),N("div",q,[o(C,{modelValue:s.value,"onUpdate:modelValue":t[2]||(t[2]=l=>s.value=l),title:"Create Post",width:"50%"},{footer:a(()=>[r("span",F,[o(i,{type:"primary",onClick:x},{default:a(()=>[p("Confirm")]),_:1}),o(i,{onClick:t[1]||(t[1]=l=>s.value=!1)},{default:a(()=>[p("Cancel")]),_:1})])]),default:a(()=>[o(V,{model:e.value,"label-position":"top","label-width":"auto"},{default:a(()=>[o(E,{label:"Name",prop:"name",required:""},{default:a(()=>[o(w,{modelValue:e.value.name,"onUpdate:modelValue":t[0]||(t[0]=l=>e.value.name=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),r("div",I,[r("div",T,[P(r("input",{class:"w-4/5 border-none outline-none font-bold text-lg","onUpdate:modelValue":t[3]||(t[3]=l=>e.value.name=l),type:"text",placeholder:"Please input article title..."},null,512),[[U,e.value.name]]),o(i,{type:"primary",onClick:t[4]||(t[4]=l=>s.value=!0)},{default:a(()=>[p("Save")]),_:1})]),o(S,{ref_key:"me",ref:u,data:e.value.content,class:"w-full h-full flex-1"},null,8,["data"])])])}}};export{se as default};
