import"./base-023a9467.js";import{E as S}from"./card-7b9566ef.js";import{D as M,E as O,a as H}from"./table-column-bea08da8.js";import"./scrollbar-a6934be9.js";import"./popper-452fb29d.js";import{E as J}from"./popover-b85e004e.js";import{E as K}from"./link-ffe14bc3.js";/* empty css             */import{E as Q}from"./overlay-427945f8.js";import{E as W}from"./button-a5e2a0da.js";import{E as X,a as Y}from"./form-item-30714343.js";import{E as Z}from"./input-780273cb.js";import{r as g,E as x}from"./index-82377cc5.js";import{E as ee,r as u,p as le,z as oe,j as te,o as ae,a as se,f as r,c as e,w as o,h as d,u as c,t as re}from"./index-ab9da3ee.js";import{E as ne}from"./index-f008c14e.js";import{P as G}from"./Peoples-ae6384c7.js";import{S as ie}from"./Search-6331e9f4.js";import{E as ue}from"./Edit-8d9255f3.js";const de={class:"w-full flex justify-center"},pe={class:"flex flex-col w-full h-full px-[4rem] py-[2rem] space-y-[1rem]"},me=r("span",{class:"text-gray-400"},"The group name",-1),ce=r("span",{class:"text-gray-400"},"The group describe information",-1),fe={class:"dialog-footer"},_e=r("span",{class:"text-gray-400"},"The group describe information",-1),ve={class:"dialog-footer"},be={class:"flex overflow-hidden rounded-md shadow-md border"},xe={class:"flex w-full h-[5rem] items-center"},he=r("span",{class:"m-[0.75rem] text-2xl font-600"},"Groups",-1),Ce={class:"flex justify-between space-x-[2rem]"},we=r("p",null,"Are you sure to delete this group?",-1),ge={class:"my-[0.5rem]"},Le={__name:"Group",props:{listAll:Boolean},setup(U){const $=U,D=ee(),p=u([]),_=u(!1),v=u(!1),h=u(-1),m=u({name:"",describe:""}),n=u({}),y=u(),V=u(),C=u(""),I=le(()=>p.value.filter(a=>!C.value||a.name.toLowerCase().includes(C.value.toLowerCase())));oe(()=>{let a=D.id;if(!a)return;let l=`/api/v1/users/${a}/groups`;$.listAll&&(l="/api/v1/groups"),g.get(l).then(s=>{p.value=s.data.data})});const T=a=>`/groups/${a}`,z=()=>{const a=c(y);a&&a.validate(l=>{l?g.post("/api/v1/groups",{name:m.value.name,describe:m.value.describe}).then(s=>{x.success("Create success"),p.value.push(s.data.data),_.value=!1}):x.error("Input invalid")})},A=a=>{n.value=Object.assign({},a),v.value=!0},B=()=>{const a=c(V);a&&a.validate(l=>{l?g.put("/api/v1/groups/"+n.value.id,n.value).then(s=>{x.success("Update success");const f=p.value.findIndex(w=>w.id===n.value.id);p.value[f]=n.value,v.value=!1}):x.error("Input invalid")})},F=a=>{g.delete("/api/v1/groups/"+a.id).then(()=>{x.success("Delete success");const l=p.value.findIndex(s=>s.id===a.id);p.value.splice(l,1),h.value=-1})};return(a,l)=>{const s=Z,f=X,w=Y,i=W,k=Q,N=ne,j=K,q=te("router-link"),b=O,R=J,L=H,P=S;return ae(),se("div",de,[r("div",pe,[e(k,{modelValue:_.value,"onUpdate:modelValue":l[3]||(l[3]=t=>_.value=t),top:"5vh",title:"Create Group",width:"50%"},{footer:o(()=>[r("span",fe,[e(i,{type:"primary",onClick:z},{default:o(()=>[d("Confirm")]),_:1}),e(i,{onClick:l[2]||(l[2]=t=>_.value=!1)},{default:o(()=>[d("Cancel")]),_:1})])]),default:o(()=>[e(w,{ref_key:"createFormRef",ref:y,model:m.value,"label-position":"top","label-width":"auto"},{default:o(()=>[e(f,{label:"Name",prop:"name",required:""},{default:o(()=>[e(s,{modelValue:m.value.name,"onUpdate:modelValue":l[0]||(l[0]=t=>m.value.name=t)},null,8,["modelValue"]),me]),_:1}),e(f,{label:"Describe",prop:"describe",required:""},{default:o(()=>[e(s,{modelValue:m.value.describe,"onUpdate:modelValue":l[1]||(l[1]=t=>m.value.describe=t),type:"textarea"},null,8,["modelValue"]),ce]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(k,{modelValue:v.value,"onUpdate:modelValue":l[7]||(l[7]=t=>v.value=t),top:"5vh",title:"Update Group",width:"50%"},{footer:o(()=>[r("span",ve,[e(i,{type:"primary",onClick:B},{default:o(()=>[d("Confirm")]),_:1}),e(i,{onClick:l[6]||(l[6]=t=>v.value=!1)},{default:o(()=>[d("Cancel")]),_:1})])]),default:o(()=>[e(w,{ref_key:"updateFormRef",ref:V,model:n.value,"label-position":"top","label-width":"auto"},{default:o(()=>[e(f,{label:"Name",prop:"name"},{default:o(()=>[e(s,{modelValue:n.value.name,"onUpdate:modelValue":l[4]||(l[4]=t=>n.value.name=t),disabled:""},null,8,["modelValue"])]),_:1}),e(f,{label:"Describe",prop:"describe",required:""},{default:o(()=>[e(s,{modelValue:n.value.describe,"onUpdate:modelValue":l[5]||(l[5]=t=>n.value.describe=t),placeholder:"Group describe"},null,8,["modelValue"]),_e]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),r("div",be,[r("div",xe,[e(c(G),{class:"ml-[1rem]",theme:"filled",size:"42",fill:"#94A3B8"}),he])]),e(P,{class:"w-full h-max"},{header:o(()=>[r("div",Ce,[e(s,{modelValue:C.value,"onUpdate:modelValue":l[8]||(l[8]=t=>C.value=t),placeholder:"Type to search"},{prefix:o(()=>[e(N,null,{default:o(()=>[e(c(ie))]),_:1})]),_:1},8,["modelValue"]),e(i,{type:"primary",plain:"",icon:c(G),onClick:l[9]||(l[9]=t=>_.value=!0)},{default:o(()=>[d("Create")]),_:1},8,["icon"])])]),default:o(()=>[e(L,{data:I.value,class:"w-full max-h-full"},{default:o(()=>[e(b,{prop:"name",label:"Name"},{default:o(t=>[e(q,{to:T(t.row.id)},{default:o(()=>[e(j,{type:"primary"},{default:o(()=>[d(re(t.row.name),1)]),_:2},1024)]),_:2},1032,["to"])]),_:1}),e(b,{prop:"describe",label:"Describe"}),e(b,{prop:"creatorId",label:"Creator"}),e(b,{prop:"createdAt",label:"CreateAt","min-width":"120px"}),e(b,{label:"Operation","min-width":"120px"},{default:o(t=>[e(i,{size:"small",circle:"",onClick:E=>A(t.row),icon:c(ue)},null,8,["onClick","icon"]),e(R,{visible:h.value==t.$index,placement:"top",width:180},{reference:o(()=>[e(i,{size:"small",type:"danger",onClick:E=>h.value=t.$index,icon:c(M),circle:"",class:"wl-[1rem]"},null,8,["onClick","icon"])]),default:o(()=>[we,r("div",ge,[e(i,{size:"small",text:"",onClick:l[10]||(l[10]=E=>h.value=-1)},{default:o(()=>[d("cancel")]),_:1}),e(i,{size:"small",type:"danger",onClick:E=>F(t.row)},{default:o(()=>[d("confirm")]),_:2},1032,["onClick"])])]),_:2},1032,["visible"])]),_:1})]),_:1},8,["data"])]),_:1})])])}}};export{Le as _};
